{% if section.settings.url != blank %}
  
  <iframe class="iframe-section" src="{{ section.settings.url }}"></iframe>
  <style>
    html, bodyÂ {
        margin: 0;
        height: 100%;
       overflow: hidden;
    }

    
    .iframe-section{
        width: 100%;
        border: none;
        min-height: 100svh;
    }  
 
    .shopify-section.section:not(#shopify-section-{{section.id}}){
      display:none !important
    }

  </style>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const header = document.querySelector("sticky-header");
      
      if(header){
        const {height} = header.getBoundingClientRect()
        const iframe = document.querySelector(".iframe-section");
        if(iframe) {
          iframe.style.minHeight = `calc(100svh - ${height * 2}px)`
        }
      }

      const footer = document.querySelector("footer");
      if(footer){
        const html = document.querySelector("html");
        const body = document.querySelector("body");
        const iframe = document.querySelector(".iframe-section");

        if(html && body && iframe){
          html.style.overflow= "auto";
          body.style.overflow= "auto";
          iframe.style.width = "calc(100% + 15px)"
        }
        
      }
    });
  </script>
{% else %}
   <h5>Insert your URL</h5>
{% endif %}
{% schema %}
  {
    "name": "doomscrollr",
    "disabled_on": {
      "groups": ["header", "footer"]
    },
    "limit": 1,
    "tag": "section",
    "class": "section",
    "settings": [
      {
        "type": "url",
        "id": "url",
        "label": "doomscrollr URL"
      },
    ],
    "presets": [
      {
        "name": "doomscrollr"
      }
    ]
  }
{% endschema %}